{% extends 'creator/base.html' %}
{% load i18n %}

{% block title %}{% trans action %} {% trans "Post" %}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2 class="card-title">{% trans action %} {% trans "Post" %}</h2>
        <a href="{% url 'creator:posts' %}" class="btn btn-secondary">{% trans "Back to Posts" %}</a>
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group">
            <label for="{{ form.title.id_for_label }}">{% trans "Title" %} *</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="alert alert-error">{{ form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.content.id_for_label }}">{% trans "Content" %} *</label>
            {{ form.content }}
            {% if form.content.errors %}
                <div class="alert alert-error">{{ form.content.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.category.id_for_label }}">{% trans "Category" %}</label>
            {{ form.category }}
            {% if form.category.errors %}
                <div class="alert alert-error">{{ form.category.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.image.id_for_label }}">{% trans "Image" %}</label>
            {{ form.image }}
            {% if form.image.errors %}
                <div class="alert alert-error">{{ form.image.errors }}</div>
            {% endif %}
            {% if post and post.image %}
                <div style="margin-top: 1rem;">
                    <p>{% trans "Current image" %}:</p>
                    <img src="{{ post.image.url }}" alt="{{ post.title }}" style="max-width: 300px; border-radius: 5px;">
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.status.id_for_label }}">{% trans "Status" %} *</label>
            {{ form.status }}
            {% if form.status.errors %}
                <div class="alert alert-error">{{ form.status.errors }}</div>
            {% endif %}
        </div>

        <div style="display: flex; gap: 1rem;">
            <button type="submit" class="btn btn-primary">{% trans "Save Post" %}</button>
            <a href="{% url 'creator:posts' %}" class="btn btn-secondary">{% trans "Cancel" %}</a>
        </div>
    </form>
</div>
{% endblock %}
